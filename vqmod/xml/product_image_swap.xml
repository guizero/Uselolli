<modification>
        <id>product_image_swap</id>
        <version>1.0beta</version>
        <vqmver>1.0</vqmver>
        <author>ocextensions.co.uk</author>
        <file name="catalog/controller/product/product.php">   
              <operation>
                  <search position="after"><![CDATA[$this->model_tool_image->resize($option_value['image']]]></search>
                <add><![CDATA[   'imagel'                  => $this->model_tool_image->resize($option_value['image'], $this->config->get('config_image_thumb_width'), $this->config->get('config_image_thumb_height')),]]></add>
              </operation>
         </file>
         <file name="catalog/view/theme/*/template/product/product.tpl">  
              <operation>
                  <search position="replace"  index="1"><![CDATA[<div class="image">]]></search>
                  <add><![CDATA[ <div id="imageWrap" class="image">]]>
                  </add>
              </operation>
               <operation>
                  <search position="replace"><![CDATA[id="image"]]></search>
                  <add><![CDATA[id="mainImage"]]>
                  </add>
              </operation>
               <operation> 
                   <search position="after" index="1,2"><![CDATA[foreach ($option['option_value'] as $option_value)]]></search>
                   <add><![CDATA[ <?php  if (!$option_value['imagel'] || strpos($option_value['imagel'], 'no_image')) $option_value['imagel'] = $thumb; ?>]]>
                  </add>
              </operation>
               <operation> 
                   <search position="replace"><![CDATA[<option value="<?php echo $option_value['product_option_value_id']; ?>">]]></search>
                   <add><![CDATA[ <option class="thumb" src="<?php echo $option_value['imagel']; ?>" value="<?php echo $option_value['product_option_value_id']; ?>">]]></add>
               </operation>
               <operation> 
                   <search position="replace" index="1"><![CDATA[<input type="radio"]]></search>
                   <add><![CDATA[ <input class="thumb" src="<?php echo $option_value['imagel']; ?>" type="radio" ]]>
                   </add>
               </operation>
                <operation> 
                   <search position="before"><![CDATA[<?php echo $footer; ?>]]></search>
                   <add><![CDATA[<script type="text/javascript"><!--
   $(document).on("click", ".thumb", function()  {
         var srcimg = $(this).attr('src');
         var i = $('<img />').attr('src',srcimg).load(function() {
            $('#mainImage').attr('src', i.attr('src'));
            $('#imageWrap').css('background-image', 'none');
        });
 return true; 
    });
  //--></script> ]]></add>
               </operation>
         </file>
</modification>


